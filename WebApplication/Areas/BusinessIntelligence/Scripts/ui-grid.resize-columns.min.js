/*!
 * ui-grid - v4.6.1 - 2018-07-04
 * Copyright (c) 2018 ; License: MIT 
 */


!function(){"use strict";var e=angular.module("ui.grid.resizeColumns",["ui.grid"]);e.service("uiGridResizeColumnsService",["gridUtil","$q","$rootScope",function(t,o,r){return{defaultGridOptions:function(e){e.enableColumnResizing=!1!==e.enableColumnResizing,!1===e.enableColumnResize&&(e.enableColumnResizing=!1)},colResizerColumnBuilder:function(e,i,n){return e.enableColumnResizing=void 0===e.enableColumnResizing?n.enableColumnResizing:e.enableColumnResizing,!1===e.enableColumnResize&&(e.enableColumnResizing=!1),o.all([])},registerPublicApi:function(e){e.api.registerEventsFromObject({colResizable:{columnSizeChanged:function(e,i){}}})},fireColumnSizeChanged:function(e,i,n){r.$applyAsync(function(){e.api.colResizable?e.api.colResizable.raise.columnSizeChanged(i,n):t.logError("The resizeable api is not registered, this may indicate that you've included the module but not added the 'ui-grid-resize-columns' directive to your grid definition.  Cannot raise any events.")})},findTargetCol:function(e,i,n){var t=e.getRenderContainer();if("left"===i){var o=t.visibleColumnCache.indexOf(e);return t.visibleColumnCache[o-1*n]}return e}}}]),e.directive("uiGridResizeColumns",["gridUtil","uiGridResizeColumnsService",function(e,o){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,i,n,t){o.defaultGridOptions(t.grid.options),t.grid.registerColumnBuilder(o.colResizerColumnBuilder),o.registerPublicApi(t.grid)},post:function(e,i,n,t){}}}}}]),e.directive("uiGridHeaderCell",["gridUtil","$templateCache","$compile","$q","uiGridResizeColumnsService","uiGridConstants",function(e,r,d,i,c,g){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(l,a,e,i){var n=i.grid;if(n.options.enableColumnResizing){var u=r.get("ui-grid/columnResizer"),s=1;n.isRTL()&&(l.position="left",s=-1);var t=function(){for(var e=a[0].getElementsByClassName("ui-grid-column-resizer"),i=0;i<e.length;i++)angular.element(e[i]).remove();var n=c.findTargetCol(l.col,"left",s),t=l.col.getRenderContainer();if(n&&0!==t.visibleColumnCache.indexOf(l.col)&&!1!==n.colDef.enableColumnResizing){var o=angular.element(u).clone();o.attr("position","left"),a.prepend(o),d(o)(l)}if(!1!==l.col.colDef.enableColumnResizing){var r=angular.element(u).clone();r.attr("position","right"),a.append(r),d(r)(l)}};t();var o=n.registerDataChangeCallback(function(){l.$applyAsync(t)},[g.dataChange.COLUMN]);l.$on("$destroy",o)}}}}}}]),e.directive("uiGridColumnResizer",["$document","gridUtil","uiGridConstants","uiGridResizeColumnsService",function(v,h,p,z){var R=angular.element('<div class="ui-grid-resize-overlay"></div>');return{priority:0,scope:{col:"=",position:"@",renderIndex:"="},require:"?^uiGrid",link:function(a,u,e,s){var r=0,l=0,d=0,c=1;function g(e){s.grid.refreshCanvas(!0).then(function(){s.grid.queueGridRefresh()})}function f(e,i){var n=i;return e.minWidth&&n<e.minWidth?n=e.minWidth:e.maxWidth&&n>e.maxWidth&&(n=e.maxWidth),n}function n(e,i){e.originalEvent&&(e=e.originalEvent),e.preventDefault(),(l=(e.targetTouches?e.targetTouches[0]:e).clientX-d)<0?l=0:l>s.grid.gridWidth&&(l=s.grid.gridWidth);var n=z.findTargetCol(a.col,a.position,c);if(!1!==n.colDef.enableColumnResizing){s.grid.element.hasClass("column-resizing")||s.grid.element.addClass("column-resizing");var t=l-r,o=parseInt(n.drawnWidth+t*c,10);l+=(f(n,o)-o)*c,R.css({left:l+"px"}),s.fireEvent(p.events.ITEM_DRAGGING)}}function t(e){e.originalEvent&&(e=e.originalEvent),e.preventDefault(),s.grid.element.removeClass("column-resizing"),R.remove();var i=(l=(e.changedTouches?e.changedTouches[0]:e).clientX-d)-r;if(0===i)return C(),void m();var n=z.findTargetCol(a.col,a.position,c);if(!1!==n.colDef.enableColumnResizing){var t=parseInt(n.drawnWidth+i*c,10);n.width=f(n,t),n.hasCustomWidth=!0,g(),z.fireColumnSizeChanged(s.grid,n.colDef,i),C(),m()}}s.grid.isRTL()&&(a.position="left",c=-1),"left"===a.position?u.addClass("left"):"right"===a.position&&u.addClass("right");var o=function(e,i){e.originalEvent&&(e=e.originalEvent),e.stopPropagation(),d=s.grid.element[0].getBoundingClientRect().left,r=(e.targetTouches?e.targetTouches[0]:e).clientX-d,s.grid.element.append(R),R.css({left:r}),"touchstart"===e.type?(v.on("touchend",t),v.on("touchmove",n),u.off("mousedown",o)):(v.on("mouseup",t),v.on("mousemove",n),u.off("touchstart",o))},m=function(){u.on("mousedown",o),u.on("touchstart",o)},C=function(){v.off("mouseup",t),v.off("touchend",t),v.off("mousemove",n),v.off("touchmove",n),u.off("mousedown",o),u.off("touchstart",o)};m();var i=function(e,i){e.stopPropagation();var n=z.findTargetCol(a.col,a.position,c);if(!1!==n.colDef.enableColumnResizing){var o=0,t=h.closestElm(u,".ui-grid-render-container").querySelectorAll("."+p.COL_CLASS_PREFIX+n.uid+" .ui-grid-cell-contents");Array.prototype.forEach.call(t,function(e){var t;angular.element(e).parent().hasClass("ui-grid-header-cell")&&(t=angular.element(e).parent()[0].querySelectorAll(".ui-grid-column-menu-button")),h.fakeElement(e,{},function(e){var i=angular.element(e);i.attr("style","float: left");var n=h.elementWidth(i);t&&(n+=h.elementWidth(t));o<n&&(o=n)})});var r=f(n,o),l=r-n.drawnWidth;n.width=r,n.hasCustomWidth=!0,g(),z.fireColumnSizeChanged(s.grid,n.colDef,l)}};u.on("dblclick",i),u.on("$destroy",function(){u.off("dblclick",i),C()})}}}])}();