/*!
 * ui-grid - v4.6.1 - 2018-07-04
 * Copyright (c) 2018 ; License: MIT 
 */


!function(){"use strict";var e=angular.module("ui.grid.selection",["ui.grid"]);e.constant("uiGridSelectionConstants",{featureName:"selection",selectionRowHeaderColName:"selectionRowHeaderCol"}),angular.module("ui.grid").config(["$provide",function(e){e.decorator("GridRow",["$delegate",function(e){return e.prototype.setSelected=function(e){e!==this.isSelected&&(this.isSelected=e,this.grid.selection.selectedCount+=e?1:-1)},e.prototype.setFocused=function(e){e!==this.isFocused&&(this.grid.selection.focusedRow&&(this.grid.selection.focusedRow.isFocused=!1),this.grid.selection.focusedRow=e?this:null,this.isFocused=e)},e}])}]),e.service("uiGridSelectionService",function(){var a={initializeGrid:function(i){i.selection={lastSelectedRow:null,focusedRow:null,selectAll:!1},i.selection.selectedCount=0,a.defaultGridOptions(i.options);var e={events:{selection:{rowFocusChanged:function(e,t,o){},rowSelectionChanged:function(e,t,o){},rowSelectionChangedBatch:function(e,t,o){}}},methods:{selection:{toggleRowSelection:function(e,t){var o=i.getRow(e);null!==o&&a.toggleRowSelection(i,o,t,i.options.multiSelect,i.options.noUnselect)},selectRow:function(e,t){var o=i.getRow(e);null===o||o.isSelected||a.toggleRowSelection(i,o,t,i.options.multiSelect,i.options.noUnselect)},selectRowByVisibleIndex:function(e,t){var o=i.renderContainers.body.visibleRowCache[e];null==o||o.isSelected||a.toggleRowSelection(i,o,t,i.options.multiSelect,i.options.noUnselect)},unSelectRow:function(e,t){var o=i.getRow(e);null!==o&&o.isSelected&&a.toggleRowSelection(i,o,t,i.options.multiSelect,i.options.noUnselect)},unSelectRowByVisibleIndex:function(e,t){var o=i.renderContainers.body.visibleRowCache[e];null!=o&&o.isSelected&&a.toggleRowSelection(i,o,t,i.options.multiSelect,i.options.noUnselect)},selectAllRows:function(t){if(!1!==i.options.multiSelect){var o=[];i.rows.forEach(function(e){e.isSelected||!1===e.enableSelection||!1===i.options.isRowSelectable(e)||(e.setSelected(!0),a.decideRaiseSelectionEvent(i,e,o,t))}),i.selection.selectAll=!0,a.decideRaiseSelectionBatchEvent(i,o,t)}},selectAllVisibleRows:function(t){if(!1!==i.options.multiSelect){var o=[];i.rows.forEach(function(e){e.visible?e.isSelected||!1===e.enableSelection||!1===i.options.isRowSelectable(e)||(e.setSelected(!0),a.decideRaiseSelectionEvent(i,e,o,t)):e.isSelected&&(e.setSelected(!1),a.decideRaiseSelectionEvent(i,e,o,t))}),i.selection.selectAll=!0,a.decideRaiseSelectionBatchEvent(i,o,t)}},clearSelectedRows:function(e){a.clearSelectedRows(i,e)},getSelectedRows:function(){return a.getSelectedRows(i).map(function(e){return e.entity}).filter(function(e){return e.hasOwnProperty("$$hashKey")||!angular.isObject(e)})},getSelectedGridRows:function(){return a.getSelectedRows(i)},getSelectedCount:function(){return i.selection.selectedCount},setMultiSelect:function(e){i.options.multiSelect=e},setModifierKeysToMultiSelect:function(e){i.options.modifierKeysToMultiSelect=e},getSelectAllState:function(){return i.selection.selectAll}}}};i.api.registerEventsFromObject(e.events),i.api.registerMethodsFromObject(e.methods)},defaultGridOptions:function(e){e.enableRowSelection=!1!==e.enableRowSelection,e.multiSelect=!1!==e.multiSelect,e.noUnselect=!0===e.noUnselect,e.modifierKeysToMultiSelect=!0===e.modifierKeysToMultiSelect,e.enableRowHeaderSelection=!1!==e.enableRowHeaderSelection,void 0===e.enableFullRowSelection&&(e.enableFullRowSelection=!e.enableRowHeaderSelection),e.enableFocusRowOnRowHeaderClick=!1!==e.enableFocusRowOnRowHeaderClick||!e.enableRowHeaderSelection,e.enableSelectRowOnFocus=!1!==e.enableSelectRowOnFocus,e.enableSelectAll=!1!==e.enableSelectAll,e.enableSelectionBatchEvent=!1!==e.enableSelectionBatchEvent,e.selectionRowHeaderWidth=angular.isDefined(e.selectionRowHeaderWidth)?e.selectionRowHeaderWidth:30,e.enableFooterTotalSelected=!1!==e.enableFooterTotalSelected,e.isRowSelectable=angular.isDefined(e.isRowSelectable)?e.isRowSelectable:angular.noop},toggleRowSelection:function(e,t,o,i,n){if(!1!==t.enableSelection){var l,c=t.isSelected;i||(c?1<(l=a.getSelectedRows(e)).length&&(c=!1,a.clearSelectedRows(e,o)):a.clearSelectedRows(e,o)),c&&n||(t.setSelected(!c),!0===t.isSelected&&(e.selection.lastSelectedRow=t),l=a.getSelectedRows(e),e.selection.selectAll=e.rows.length===l.length,e.api.selection.raise.rowSelectionChanged(t,o))}},shiftSelect:function(e,t,o,i){if(i){var n=0<a.getSelectedRows(e).length?e.renderContainers.body.visibleRowCache.indexOf(e.selection.lastSelectedRow):0,l=e.renderContainers.body.visibleRowCache.indexOf(t);if(l<n){var c=n;n=l,l=c}for(var r=[],s=n;s<=l;s++){var d=e.renderContainers.body.visibleRowCache[s];d&&(d.isSelected||!1===d.enableSelection||(d.setSelected(!0),e.selection.lastSelectedRow=d,a.decideRaiseSelectionEvent(e,d,r,o)))}a.decideRaiseSelectionBatchEvent(e,r,o)}},getSelectedRows:function(e){return e.rows.filter(function(e){return e.isSelected})},clearSelectedRows:function(t,o){var i=[];a.getSelectedRows(t).forEach(function(e){e.isSelected&&(e.setSelected(!1),a.decideRaiseSelectionEvent(t,e,i,o))}),t.selection.selectAll=!1,t.selection.selectedCount=0,a.decideRaiseSelectionBatchEvent(t,i,o)},decideRaiseSelectionEvent:function(e,t,o,i){e.options.enableSelectionBatchEvent?o.push(t):e.api.selection.raise.rowSelectionChanged(t,i)},decideRaiseSelectionBatchEvent:function(e,t,o){0<t.length&&e.api.selection.raise.rowSelectionChangedBatch(t,o)}};return a}),e.directive("uiGridSelection",["uiGridSelectionConstants","uiGridSelectionService","uiGridConstants",function(d,a,u){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,t,o,i){if(a.initializeGrid(i.grid),i.grid.options.enableRowHeaderSelection){var n={name:d.selectionRowHeaderColName,displayName:"",width:i.grid.options.selectionRowHeaderWidth,minWidth:10,cellTemplate:"ui-grid/selectionRowHeader",headerCellTemplate:"ui-grid/selectionHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};i.grid.addRowHeaderColumn(n,0)}var l=!1,c=function(e){return e.forEach(function(e){e.enableSelection=i.grid.options.isRowSelectable(e)}),e},r=function(){i.grid.options.isRowSelectable!==angular.noop&&!0!==l&&(i.grid.registerRowsProcessor(c,500),l=!0)};r();var s=i.grid.registerDataChangeCallback(r,[u.dataChange.OPTIONS]);e.$on("$destroy",s)},post:function(e,t,o,i){}}}}}]),e.directive("uiGridSelectionRowHeaderButtons",["$templateCache","uiGridSelectionService","gridUtil",function(e,c,r){return{replace:!0,restrict:"E",template:e.get("ui-grid/selectionRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(e,t,o,i){var n=i.grid;function l(e,t){if(t.stopPropagation(),t.shiftKey)c.shiftSelect(n,e,t,n.options.multiSelect);else if(t.ctrlKey||t.metaKey)c.toggleRowSelection(n,e,t,n.options.multiSelect,n.options.noUnselect);else if(e.groupHeader){c.toggleRowSelection(n,e,t,n.options.multiSelect,n.options.noUnselect);for(var o=0;o<e.treeNode.children.length;o++)c.toggleRowSelection(n,e.treeNode.children[o].row,t,n.options.multiSelect,n.options.noUnselect)}else c.toggleRowSelection(n,e,t,n.options.multiSelect&&!n.options.modifierKeysToMultiSelect,n.options.noUnselect);n.options.enableFocusRowOnRowHeaderClick&&e.setFocused(!e.isFocused)&&n.api.selection.raise.rowFocusChanged(e,t)}e.selectButtonClick=l,e.selectButtonKeyDown=function(e,t){32===t.keyCode&&(t.preventDefault(),l(e,t))},"ie"===r.detectBrowser()&&t.on("mousedown",function(e){(e.ctrlKey||e.shiftKey)&&(e.target.onselectstart=function(){return!1},window.setTimeout(function(){e.target.onselectstart=null},0))}),e.$on("$destroy",function(){t.off()})}}}]),e.directive("uiGridSelectionSelectAllButtons",["$templateCache","uiGridSelectionService",function(e,i){return{replace:!0,restrict:"E",template:e.get("ui-grid/selectionSelectAllButtons"),scope:!1,link:function(t){var o=t.col.grid;t.headerButtonKeyDown=function(e){32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),t.headerButtonClick(e))},t.headerButtonClick=function(e){o.selection.selectAll?(i.clearSelectedRows(o,e),o.options.noUnselect&&o.api.selection.selectRowByVisibleIndex(0,e),o.selection.selectAll=!1):o.options.multiSelect&&(o.api.selection.selectAllVisibleRows(e),o.selection.selectAll=!0)}}}}]),e.directive("uiGridViewport",function(){return{priority:-200,scope:!1,compile:function(e){var t=angular.element(e[0].querySelector(".ui-grid-canvas:not(.ui-grid-empty-base-layer-container)").children[0]),o="'ui-grid-row-selected': row.isSelected, 'ui-grid-row-focused': row.isFocused}",i=t.attr("ng-class");return o=i?i.slice(0,-1)+","+o:"{"+o,t.attr("ng-class",o),{pre:function(e,t,o,i){},post:function(e,t,o,i){}}}}}),e.directive("uiGridCell",["uiGridConstants","uiGridSelectionService",function(a,u){return{priority:-200,restrict:"A",require:"?^uiGrid",scope:!1,link:function(o,t,e,i){var n=0;i.grid.api.cellNav&&i.grid.api.cellNav.on.viewPortKeyDown(o,function(e,t){null!==t&&t.row===o.row&&t.col===o.col&&e.keyCode===a.keymap.SPACE&&"selectionRowHeaderCol"===o.col.colDef.name&&(e.preventDefault(),u.toggleRowSelection(o.grid,o.row,e,o.grid.options.multiSelect&&!o.grid.options.modifierKeysToMultiSelect,o.grid.options.noUnselect),o.$apply())});var l=function(e){"ui-grid-icon-minus-squared"!==e.target.className&&"ui-grid-icon-plus-squared"!==e.target.className&&(t.off("touchend",r),e.shiftKey?u.shiftSelect(o.grid,o.row,e,o.grid.options.multiSelect):e.ctrlKey||e.metaKey?u.toggleRowSelection(o.grid,o.row,e,o.grid.options.multiSelect,o.grid.options.noUnselect):o.grid.options.enableSelectRowOnFocus&&u.toggleRowSelection(o.grid,o.row,e,o.grid.options.multiSelect&&!o.grid.options.modifierKeysToMultiSelect,o.grid.options.noUnselect),o.row.setFocused(!o.row.isFocused),o.grid.api.selection.raise.rowFocusChanged(o.row,e),o.$apply(),window.setTimeout(function(){t.on("touchend",r)},300))},c=function(){n=(new Date).getTime(),t.off("click",l)},r=function(e){(new Date).getTime()-n<300&&l(e),window.setTimeout(function(){t.on("click",l)},300)};function s(){o.grid.options.enableRowSelection&&o.grid.options.enableFullRowSelection&&"selectionRowHeaderCol"!==o.col.colDef.name&&(t.addClass("ui-grid-disable-selection"),t.on("touchstart",c),t.on("touchend",r),t.on("click",l),o.registered=!0)}s();var d=o.grid.registerDataChangeCallback(function(){o.grid.options.enableRowSelection&&o.grid.options.enableFullRowSelection&&!o.registered?s():o.grid.options.enableRowSelection&&o.grid.options.enableFullRowSelection||!o.registered||o.registered&&(t.removeClass("ui-grid-disable-selection"),t.off("touchstart",c),t.off("touchend",r),t.off("click",l),o.registered=!1)},[a.dataChange.OPTIONS]);t.on("$destroy",d)}}}]),e.directive("uiGridGridFooter",["$compile","gridUtil",function(l,o){return{restrict:"EA",replace:!0,priority:-1e3,require:"^uiGrid",scope:!0,compile:function(){return{pre:function(i,n,e,t){t.grid.options.showGridFooter&&o.getTemplate("ui-grid/gridFooterSelectedItems").then(function(e){var t=angular.element(e),o=l(t)(i);angular.element(n[0].getElementsByClassName("ui-grid-grid-footer")[0]).append(o)})},post:function(e,t,o,i){}}}}}])}();