/*!
 * ui-grid - v4.6.1 - 2018-07-04
 * Copyright (c) 2018 ; License: MIT 
 */


!function(){"use strict";var e=angular.module("ui.grid.expandable",["ui.grid"]);e.service("uiGridExpandableService",["gridUtil",function(n){var a={initializeGrid:function(i){i.expandable={},i.expandable.expandedAll=!1,i.options.enableOnDblClickExpand=!1!==i.options.enableOnDblClickExpand,i.options.enableExpandable=!1!==i.options.enableExpandable,i.options.showExpandAllButton=!1!==i.options.showExpandAllButton,i.options.expandableRowHeight=i.options.expandableRowHeight||150,i.options.expandableRowHeaderWidth=i.options.expandableRowHeaderWidth||40,i.options.enableExpandable&&!i.options.expandableRowTemplate&&(n.logError("You have not set the expandableRowTemplate, disabling expandable module"),i.options.enableExpandable=!1);var e={events:{expandable:{rowExpandedBeforeStateChanged:function(e,n,o){},rowExpandedStateChanged:function(e,n,o){},rowExpandedRendered:function(e,n,o){}}},methods:{expandable:{toggleRowExpansion:function(e,n){var o=i.getRow(e);null!==o&&a.toggleRowExpansion(i,o,n)},expandAllRows:function(){a.expandAllRows(i)},collapseAllRows:function(){a.collapseAllRows(i)},toggleAllRows:function(){a.toggleAllRows(i)},expandRow:function(e){var n=i.getRow(e);null===n||n.isExpanded||a.toggleRowExpansion(i,n)},collapseRow:function(e){var n=i.getRow(e);null!==n&&n.isExpanded&&a.toggleRowExpansion(i,n)},getExpandedRows:function(){return a.getExpandedRows(i).map(function(e){return e.entity})}}}};i.api.registerEventsFromObject(e.events),i.api.registerMethodsFromObject(e.methods)},toggleRowExpansion:function(n,o,i){n.api.expandable.raise.rowExpandedBeforeStateChanged(o),o.isExpanded=!o.isExpanded,angular.isUndefined(o.expandedRowHeight)&&(o.expandedRowHeight=n.options.expandableRowHeight),o.isExpanded?(o.height=o.grid.options.rowHeight+o.expandedRowHeight,n.expandable.expandedAll=a.getExpandedRows(n).length===n.rows.length):(o.height=o.grid.options.rowHeight,n.expandable.expandedAll=!1),n.api.expandable.raise.rowExpandedStateChanged(o,i),function e(){o.expandedRendered?n.api.expandable.raise.rowExpandedRendered(o,i):window.setTimeout(e,100)}()},expandAllRows:function(n){n.renderContainers.body.visibleRowCache.forEach(function(e){e.isExpanded||e.entity.subGridOptions&&e.entity.subGridOptions.disableRowExpandable||a.toggleRowExpansion(n,e)}),n.expandable.expandedAll=!0,n.queueGridRefresh()},collapseAllRows:function(n){n.renderContainers.body.visibleRowCache.forEach(function(e){e.isExpanded&&a.toggleRowExpansion(n,e)}),n.expandable.expandedAll=!1,n.queueGridRefresh()},toggleAllRows:function(e){e.expandable.expandedAll?a.collapseAllRows(e):a.expandAllRows(e)},getExpandedRows:function(e){return e.rows.filter(function(e){return e.isExpanded})}};return a}]),e.directive("uiGridExpandable",["uiGridExpandableService","$templateCache",function(d,t){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,o,i){if(d.initializeGrid(i.grid),i.grid.options.enableExpandable&&!1!==i.grid.options.enableExpandableRowHeader){var a={name:"expandableButtons",displayName:"",exporterSuppressExport:!0,enableColumnResizing:!1,enableColumnMenu:!1,width:i.grid.options.expandableRowHeaderWidth||30};a.cellTemplate=t.get("ui-grid/expandableRowHeader"),a.headerCellTemplate=t.get("ui-grid/expandableTopRowHeader"),i.grid.addRowHeaderColumn(a,-90)}},post:function(e,n,o,i){}}}}}]),e.directive("uiGrid",function(){return{replace:!0,priority:599,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,o,i){i.grid.api.core.on.renderingComplete(e,function(){e.row&&e.row.grid&&e.row.grid.options&&e.row.grid.options.enableExpandable&&(i.grid.parentRow=e.row)})},post:function(e,n,o,i){}}}}}),e.directive("uiGridExpandableRow",["uiGridExpandableService","$compile","uiGridConstants","gridUtil",function(e,t,n,o){return{replace:!1,priority:0,scope:!1,compile:function(){return{pre:function(a,d){o.getTemplate(a.grid.options.expandableRowTemplate).then(function(e){if(a.grid.options.expandableRowScope){var n=a.grid.options.expandableRowScope;for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o])}var i=angular.element(e);i=t(i)(a),d.append(i),a.row.element=d,a.row.expandedRendered=!0})},post:function(e,n){e.row.element=n,e.$on("$destroy",function(){e.row.expandedRendered=!1})}}}}}]),e.directive("uiGridRow",function(){return{priority:-200,scope:!1,compile:function(){return{pre:function(n,e){n.grid.options.enableExpandable&&(n.expandableRow={},n.expandableRow.shouldRenderExpand=function(){return"body"===n.colContainer.name&&!1!==n.grid.options.enableExpandable&&n.row.isExpanded&&(!n.grid.isScrollingVertically||n.row.expandedRendered)},n.expandableRow.shouldRenderFiller=function(){return n.row.isExpanded&&("body"!==n.colContainer.name||n.grid.isScrollingVertically&&!n.row.expandedRendered)},n.grid.options.enableOnDblClickExpand&&e.on("dblclick",function(e){n.grid.api.expandable.toggleRowExpansion(n.row.entity,e)}))},post:function(e,n,o,i){}}}}}),e.directive("uiGridViewport",["$compile","gridUtil","$templateCache",function(e,n,a){return{priority:-200,scope:!1,compile:function(e){var n=angular.element(e.children().children()[0]),o=a.get("ui-grid/expandableScrollFiller"),i=a.get("ui-grid/expandableRow");return n.append(i),n.append(o),{pre:function(e,n,o,i){},post:function(e,n,o,i){}}}}}])}();